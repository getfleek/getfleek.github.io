<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-192871813-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-192871813-1');
    </script>

    <meta charset="UTF-8">
    <link rel="icon" href="./assets/favicon.png">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
        referrerpolicy="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="./style.css"> -->
    <link href="http://fonts.cdnfonts.com/css/gilroy-bold" rel="stylesheet">
    <title>Form</title>
    <link rel="stylesheet" href="./dist/css/style.css">
</head>

<body>
    <div class="container">

        <section id="fifth">
            <div class="letsgrid">
                <label for="name">1<i class="fas fa-arrow-right"></i> Which of these online subscriptions do you use?*
                </label>
            </div>
            <p>Choose as many as you like</p>
            <div class="grid subscriptions">
                <div data-value="LinkedIN Premium" class="choosebtn ">
                    <span class="option">A</span>LinkedIN Premium
                </div>
                <div data-value="Sony Liv" class="choosebtn ">
                    <span class="option">B</span>Sony Liv
                </div>
                <div class="choosebtn" data-value="Youtube Premium">
                    <span class="option">C</span>Youtube Premium
                </div>
                <div class="choosebtn" data-value="Amazon Prime">
                    <span class="option">D</span>Amazon Prime
                </div>
                <div class="choosebtn" data-value="New York Times">
                    <span class="option">E</span>New York Times
                </div>
                <div class="choosebtn" data-value="Zomato Pro">
                    <span class="option">F</span>Zomato Pro
                </div>
                <div class="choosebtn" data-value="Disney+Hotstar">
                    <span class="option">G</span>Disney+ Hotstar
                </div>
                <div class="choosebtn" data-value="Netflix">
                    <span class="option">H</span>Netflix
                </div>
                <div class="choosebtn" data-value="The Economis">
                    <span class="option">I</span>The Economist
                </div>
                <div class="choosebtn" data-value="Zee5 Premium">
                    <span class="option">J</span>Zee5 Premium
                </div>
                <div class="choosebtn" data-value="Harvard Business Review">
                    <span class="option">K</span>Harvard Business Review
                </div>
                <div class="choosebtn" data-value="Spotify">
                    <span class="option">L</span>Spotify
                </div>

                <div class="choosebtn" data-value="Swiggy Super">
                    <span class="option">M</span>Swiggy Super
                </div>
            </div>
            <!-- <p class="tab">Tab + Enter ↵ to make a line break</p> -->

            <div class="okaybtn">
                <a href="#sixth">OK<i class="fas fa-check"></i></a>
            </div>

        </section>
        <section id="sixth">
            <div class="gd">
                <label for="name">2<i class="fas fa-arrow-right"></i><span>Let us know if there are any other frequent
                        subscriptions you use, that we missed</span></label>
            </div>
            <input id="frequent-subscription" name="frequent-subscription" type="text"
                placeholder="Type your answer here...">
            <!-- <p class="tab">Tab + Enter ↵ to make a line break</p> -->
            <div class="okaybtn">
                <a href="#seventh">OK<i class="fas fa-check"></i></a>
            </div>

        </section>
        <section id="seventh">
            <label for="name">3<i class="fas fa-arrow-right"></i>Which of these payment methods do you use to pay for
                your
                subscriptions? *</label>
            <p>Choose as many as you like</p>
            <div class="option5 " data-value="I purchase my subscriptions through Play Store/App Store">
                <span class="option">A</span>I purchase my subscriptions through Play Store/App Store</span>
            </div>
            <div class="option5" data-value="Wallets (Amazon Pay, PayTM, etc)">
                <span class="option">B</span>Wallets (Amazon Pay, PayTM, etc)</span>
            </div>
            <div class="option5" data-value="Credit Card">
                <span class="option">C</span>Credit Card
            </div>
            <div class="option5" data-value="UPI">
                <span class="option">D</span>UPI</span>
            </div>
            <div class="option5" data-value="Debit Card">
                <span class="option">E</span>Debit Card</span>
            </div>
            <!-- <p class="tab">Tab + Enter ↵ to make a line break</p> -->
            <div class="okaybtn">
                <a href="#eighth">OK<i class="fas fa-check"></i></a>
            </div>
        </section>

        <section id="eighth">
            <label for="name">4<i class="fas fa-arrow-right"></i>How many online subscriptions do you use?</label>
            <!-- <p>Choose as many as you like</p> -->
            <div class="gridlast subscription-nos">

                <div class="option6" data-value="0-5">
                    <span class="option">A</span>0-5
                </div>
                <div class="option6" data-value="6-8">
                    <span class="option">B</span>6-8
                </div>
                <div class="option6" data-value="9-12">
                    <span class="option">C</span>9-12
                </div>
                <div class="option6" data-value="12">
                    <span class="option">D</span>>12
                </div>
            </div>
            <!-- <p class="tab">Tab + Enter ↵ to make a line break</p> -->
            <div class="okaybtn">
                <a href="#nine">OK<i class="fas fa-check"></i></a>
            </div>
        </section>

        <section id="nine">
            <label for="name">5<i class="fas fa-arrow-right"></i>Which mobile phone OS do you use?</label>
            <!-- <p>Choose as many as you like</p> -->
            <div class="gridlast1 subscription-os">
                <div class="option7" data-value="Android">
                    <span class="option">A</span>Android
                </div>
                <div class="option7" data-value="IOS">
                    <span class="option">B</span>IOS
                </div>
            </div>
            <!-- <p class="tab">Tab + Enter ↵ to make a line break</p> -->
            <div class="submitbutton">
                <a id="remquesSubmitButton">Submit</a>
            </div>
        </section>
    </div>







    <!-- {% comment %}  -->
    <script src="./index.js"></script>
    <!-- {% endcomment %} -->








    <script>
        const remquesSubmitButton = document.querySelector('#remquesSubmitButton')
        if (remquesSubmitButton) {
            remquesSubmitButton.addEventListener('click', (e) => {
                // get subscriptions values
                let subscriptionsDiv = document.querySelectorAll('.subscriptions > .active')
                let subscriptions = Array.from(subscriptionsDiv).map(sub => sub.dataset.value)

                const frequentSubscription = document.querySelector('#frequent-subscription').value
                console.log('started')
                // get payment method values
                let paymentMethodsDiv = document.querySelectorAll('.option5.active')
                let paymentMethods = Array.from(paymentMethodsDiv).map(pay => pay.dataset.value)

                // get no of subscriptions value
                let subscriptionNos = document.querySelector('.subscription-nos > .active')

                // os
                let subscriptionOS = document.querySelector('.subscription-os > .active')


                // get email from page query
                var urlParams = new URLSearchParams(window.location.search)
                const emailQuery = urlParams.get('email')

                const data = {
                    email: emailQuery,
                    subscriptions: subscriptions,
                    frequentSubscription: frequentSubscription,
                    paymentmethods: paymentMethods,
                    SubscriptionNumbers: subscriptionNos ? subscriptionNos.dataset.value : subscriptionNos,
                    SubscriptionOStype: subscriptionOS ? subscriptionOS.dataset.value : subscriptionOS
                }
                const api = 'https://api-dev.getfleek.app/join//add-response/'
                console.log('request is one')
                fetch(api, {
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    method: "POST",
                    body: JSON.stringify(data)
                })
                    .then((res) => res.json())
                    .then((d) => {
                        console.log(data)
                        console.log(d)
                        window.location.href = "/thanks.html"
                    })
                    .catch((e) => {
                        console.log(data)
                        console.log(e)

                        // uncomment this line
                        window.location.href = "./thanks.html"


                        // setInterval(() => {
                        //     window.location.href = "/thanks.html"
                        // }, 1500000)
                    })
            })

        }
    </script>
</body>

</html>